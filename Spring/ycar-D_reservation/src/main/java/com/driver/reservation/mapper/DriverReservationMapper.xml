<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  
<mapper namespace="com.driver.reservation.dao.DriverReservationDao">

<resultMap type="com.driver.reservation.domain.DriverReservation" id="drv">
	<id property="dr_idx" column="dr_idx"/>
	<result property="d_idx" column="d_idx"/>
	<result property="d_date" column="d_date"/>
	<result property="d_startTime" column="d_starttime"/>
	<result property="d_endTime" column="d_endtime"/>
	<result property="d_commute" column="d_commute"/>
	<result property="d_startPoint" column="d_startpoint"/>
	<result property="d_endPoint" column="d_endpoint"/>
	<result property="d_fee" column="d_fee"/>
	<result property="d_distance" column="d_distance"/>
	<result property="d_startlon" column="d_startlon"/>
	<result property="d_startlat" column="d_startlat"/>
	<result property="d_endlon" column="d_endlon"/>
	<result property="d_endlat" column="d_endlat"/>
</resultMap>

<insert id="InsertReservation" parameterType="com.driver.reservation.domain.DriverReservation">
	insert into D_CARPOOL (d_idx,d_date,d_starttime,d_endtime,d_commute,d_startpoint,d_endpoint,d_fee,d_distance,d_startlon,d_startlat,d_endlon,d_endlat) values (#{d_idx},#{d_date},#{d_startTime},#{d_endTime},#{d_commute},#{d_startPoint},#{d_endPoint},#{d_fee},#{d_distance},#{d_startlon},#{d_startlat},#{d_endlon},#{d_endlat})
</insert>

<!-- 과거 -->
<select id="pastList" resultMap="drv">
	select dr_idx,d_date,d_starttime,d_endtime,d_commute,d_startpoint,d_endpoint,d_fee,d_startlon,d_startlat,d_endlon,d_endlat from D_CARPOOL where  curdate() > d_date and d_idx = #{d_idx} order by d_date desc
</select>

<!-- 미래 -->
<select id="futureList" resultMap="drv">
	select dr_idx,d_date,d_starttime,d_endtime,d_commute,d_startpoint,d_endpoint,d_fee,d_startlon,d_startlat,d_endlon,d_endlat from D_CARPOOL where d_date > curdate() and d_idx = #{d_idx} order by d_date desc
</select>

<!-- 현재 -->
<select id="todayList" resultMap="drv">
	select dr_idx,d_date,d_starttime,d_endtime,d_commute,d_startpoint,d_endpoint,d_fee,d_startlon,d_startlat,d_endlon,d_endlat from D_CARPOOL where d_date = curdate() and d_idx = #{d_idx} order by d_date desc
</select>

<delete id="deleteCarpoor">
	delete from D_CARPOOL where dr_idx= #{dr_idx};
</delete>


  
</mapper>